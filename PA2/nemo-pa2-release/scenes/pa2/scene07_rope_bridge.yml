# ==============================================================================
# Bonus Scene 1: Rope Bridge
# ==============================================================================
# Physical setup:
#   - 9 particles laid out horizontally along the x-axis
#   - Particles 0 (left anchor) and 8 (right anchor) are fixed
#   - 7 free particles (IDs 1–7) hang between the two anchors
#   - All particles start at the same height (z=2.0) with equal x-spacing (0.5)
#   - Rest length of each spring segment = 0.5 (matches initial spacing)
#   - Under gravity (default -9.81 in z), the free particles sag downward
#     and settle into a catenary (chain) shape
#   - Moderate spring damping damps out oscillations and allows stable settling
#
# Interesting for implicit integration:
#   - Stiff springs (k=200) with gravity create a challenging coupled system
#   - Explicit Euler would require very small timesteps to avoid blowup
#   - LinearizedImplicitSolver handles this stably at h=0.005
#   - The sagging equilibrium demonstrates the catenary shape arising from
#     the balance of spring tension and gravitational force at each node
#
# Particle layout (IDs and positions):
#   0(fixed) -- 1 -- 2 -- 3 -- 4 -- 5 -- 6 -- 7 -- 8(fixed)
#   x=0.0     0.5  1.0  1.5  2.0  2.5  3.0  3.5   4.0
#   z=2.0     2.0  2.0  2.0  2.0  2.0  2.0  2.0   2.0  (initial)
#   -> free particles sag downward under gravity
# ==============================================================================

solver:
  type: linearized_implicit
  timestep: 0.005
  # gravity field: default -9.81 in z (omitted = use default)

# Plot the z-position of the midpoint particle (ID=4) over time.
# We expect it to drop from z=2.0 and settle at a lower equilibrium.
plot:
  particle_id: 4
  dof: 2
  y_range: [0.5, 2.2]

particles:
  # Particle 0 — left anchor (fixed)
  - pos: [0.0, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: true
    mass: 0.5
    radius: 0.06

  # Particle 1
  - pos: [0.5, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: false
    mass: 0.2
    radius: 0.05

  # Particle 2
  - pos: [1.0, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: false
    mass: 0.2
    radius: 0.05

  # Particle 3
  - pos: [1.5, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: false
    mass: 0.2
    radius: 0.05

  # Particle 4 — midpoint (plotted)
  - pos: [2.0, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: false
    mass: 0.2
    radius: 0.05

  # Particle 5
  - pos: [2.5, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: false
    mass: 0.2
    radius: 0.05

  # Particle 6
  - pos: [3.0, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: false
    mass: 0.2
    radius: 0.05

  # Particle 7
  - pos: [3.5, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: false
    mass: 0.2
    radius: 0.05

  # Particle 8 — right anchor (fixed)
  - pos: [4.0, 0.0, 2.0]
    vel: [0.0, 0.0, 0.0]
    fixed: true
    mass: 0.5
    radius: 0.06

springs:
  # Segment 0-1
  - particle_ids: [0, 1]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5

  # Segment 1-2
  - particle_ids: [1, 2]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5

  # Segment 2-3
  - particle_ids: [2, 3]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5

  # Segment 3-4
  - particle_ids: [3, 4]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5

  # Segment 4-5
  - particle_ids: [4, 5]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5

  # Segment 5-6
  - particle_ids: [5, 6]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5

  # Segment 6-7
  - particle_ids: [6, 7]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5

  # Segment 7-8
  - particle_ids: [7, 8]
    stiffness: 200.0
    damping: 0.8
    rest_length: 0.5
